app-id: io.github.divverent.aaaaxy
runtime: org.freedesktop.Platform
# Do we need to provide a GL extension somehow?
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.golang
command: aaaaxy
finish-args:
  # Needed to access gamepads and for 3D graphics.
  # If we ever get a gamepad-specific permission, switch to that + dri instead.
  - --device=all
  # Needed for XShm.
  - --share=ipc
  # Needed for X11.
  - --socket=x11
  # Needed for audio playback.
  - --socket=pulseaudio
modules:
  - name: aaaaxy
    buildsystem: simple
    build-commands:
      - |
        . /usr/lib/sdk/golang/enable.sh
        export ADVZIP=:  # Not available on Flatpak SDK.
        export STRIP_NONDETERMINISM_GZIP=:  # Not available on Flatpak SDK.
        export STRIP_NONDETERMINISM_ZIP=:  # Not available on Flatpak SDK.
        GOTOOLCHAIN=local AAAAXY_BUILD_USE_VERSION_FILE=true make BUILDTYPE=release BINARY=/app/bin/aaaaxy
        mkdir -p /app/share/icons/hicolor/scalable/apps
        cp aaaaxy.svg /app/share/icons/hicolor/scalable/apps/io.github.divverent.aaaaxy.svg
        mkdir -p /app/share/applications
        sed -e 's,Icon=aaaaxy,Icon=io.github.divverent.aaaaxy,' < aaaaxy.desktop > /app/share/applications/io.github.divverent.aaaaxy.desktop
        mkdir -p /app/share/metainfo
        sed -e 's,aaaaxy\.desktop,io.github.divverent.aaaaxy.desktop,g' < io.github.divverent.aaaaxy.metainfo.xml > /app/share/metainfo/io.github.divverent.aaaaxy.appdata.xml
    sources:
      - type: git
        url: https://github.com/divVerent/aaaaxy
        # --- TAG GOES HERE ---
        tag: v1.6.301
        # --- REV GOES HERE ---
        commit: 878506bcd420f65923da54cf6fd86ce214ee31a6
      - type: file
        path: modules.txt
        dest: vendor
      # --- GO MODULES START HERE, USE go-vendor-to-flatpak-yml.sh TO UPDATE ---
      - type: git
        url: https://github.com/Microsoft/go-winio
        tag: v0.6.2
        commit: 3c9576c9346a1892dee136329e7e15309e82fb4f
        dest: vendor/github.com/Microsoft/go-winio
      - type: git
        url: https://github.com/adrg/xdg
        tag: v0.5.3
        commit: aa865a51a1b35fd06925fd6b8604991e79e3167e
        dest: vendor/github.com/adrg/xdg
      - type: git
        url: https://github.com/akavel/rsrc
        tag: v0.10.2
        commit: 936343600d578fb5da472acf6987ed76935a389b
        dest: vendor/github.com/akavel/rsrc
      - type: git
        url: https://github.com/davecgh/go-spew
        tag: v1.1.1
        commit: 152484fe5c9ff65d013f0f372d748c03e8749e6d
        dest: vendor/github.com/davecgh/go-spew
      - type: git
        url: https://github.com/dchest/jsmin
        tag: v1.0.0
        commit: f7b8dfff241829494219e93e4ecf27901ca5d438
        dest: vendor/github.com/dchest/jsmin
      - type: git
        url: https://github.com/ebitengine/gomobile
        commit: ea854a63cce19ea19a482297a4f1e22e30e95648
        dest: vendor/github.com/ebitengine/gomobile
      - type: git
        url: https://github.com/ebitengine/hideconsole
        tag: v1.0.0
        commit: de164ca4f26f9518132bd4af4b7e54b53aa4cf22
        dest: vendor/github.com/ebitengine/hideconsole
      - type: git
        url: https://github.com/ebitengine/oto
        tag: v3.4.0
        commit: 3578d311086e2233e7b65716b1e350ca3497e1c0
        dest: vendor/github.com/ebitengine/oto/v3
      - type: git
        url: https://github.com/ebitengine/purego
        tag: v0.9.0
        commit: 291e8afab3b5eeda6a027deaffc1120f7ee97096
        dest: vendor/github.com/ebitengine/purego
      - type: git
        url: https://github.com/fardog/tmx
        commit: 02c45f26167251c118de4f2b10f42fe43f1ad413
        dest: vendor/github.com/fardog/tmx
      - type: git
        url: https://github.com/go-logr/logr
        tag: v1.2.0
        commit: 62568d8e0639808fdc0f578eb8eb583b477c7cad
        dest: vendor/github.com/go-logr/logr
      - type: git
        url: https://github.com/go-text/typesetting
        tag: v0.3.0
        commit: b7a51d1525aa33c6ddff6208e5d3b3618d52419f
        dest: vendor/github.com/go-text/typesetting
      - type: git
        url: https://github.com/golang/groupcache
        commit: 41bb18bfe9da5321badc438f91158cd790a33aa3
        dest: vendor/github.com/golang/groupcache
      - type: git
        url: https://github.com/google/go-cmp
        tag: v0.7.0
        commit: 9b12f366a942ebc7254abc7f32ca05068b455fb7
        dest: vendor/github.com/google/go-cmp
      - type: git
        url: https://github.com/google/go-licenses
        commit: 706b9c60edd424a8b6d253fe10dfb7b8e942d4a5
        dest: vendor/github.com/google/go-licenses
      - type: git
        url: https://github.com/google/licenseclassifier
        tag: v2.0.0
        commit: e6a9bb99b5a6f71d5a34336b8245e305f5430f99
        dest: vendor/github.com/google/licenseclassifier/v2
      - type: git
        url: https://github.com/hajimehoshi/bitmapfont
        tag: v3.3.0
        commit: ab8add7409b69fdd1bc828879dd4be0d7b06a2cb
        dest: vendor/github.com/hajimehoshi/bitmapfont/v3
      - type: git
        url: https://github.com/hajimehoshi/ebiten
        tag: v2.9.1
        commit: cb26a22badda066bd9474d3f04ecb8af76a76b5b
        dest: vendor/github.com/hajimehoshi/ebiten/v2
      - type: git
        url: https://github.com/inconshreveable/mousetrap
        tag: v1.1.0
        commit: 4e8053ee7ef85a6bd26368364a6d27f1641c1d21
        dest: vendor/github.com/inconshreveable/mousetrap
      - type: git
        url: https://github.com/jeandeaual/go-locale
        commit: 0ef82f21eadeb5a4b6be84499ab99c89d825778c
        dest: vendor/github.com/jeandeaual/go-locale
      - type: git
        url: https://github.com/jezek/xgb
        tag: v1.1.1
        commit: 173fab59d6200a1502285d5d66cc21c732122a96
        dest: vendor/github.com/jezek/xgb
      - type: git
        url: https://github.com/jfreymuth/oggvorbis
        tag: v1.0.5
        commit: c02fb2ffd89cdcc258af6e4b518f45a485a396d2
        dest: vendor/github.com/jfreymuth/oggvorbis
      - type: git
        url: https://github.com/jfreymuth/vorbis
        tag: v1.0.2
        commit: 55da9865afe7a8953bee35bef04c240163786ccc
        dest: vendor/github.com/jfreymuth/vorbis
      - type: git
        url: https://github.com/josephspurrier/goversioninfo
        tag: v1.5.0
        commit: 53cb51b8aa6b6b62ab8196e66a766ea7598c67fa
        dest: vendor/github.com/josephspurrier/goversioninfo
      - type: git
        url: https://github.com/leonelquinteros/gotext
        tag: v1.7.2
        commit: dfb32f237361d8a9dd99c5e2fe036f7a234c0b7e
        dest: vendor/github.com/leonelquinteros/gotext
      - type: git
        url: https://github.com/lestrrat-go/strftime
        tag: v1.1.1
        commit: a8371f71591092e60e52e30ba5f8e29484869fca
        dest: vendor/github.com/lestrrat-go/strftime
      - type: git
        url: https://github.com/lucasb-eyer/go-colorful
        tag: v1.3.0
        commit: 680f8257cbbd7f283eaf717de5ce105a6a741bd6
        dest: vendor/github.com/lucasb-eyer/go-colorful
      - type: git
        url: https://github.com/mitchellh/hashstructure
        tag: v2.0.2
        commit: a045b665615f739329536a58c25ca6327abf1ec1
        dest: vendor/github.com/mitchellh/hashstructure/v2
      - type: git
        url: https://github.com/ncruces/zenity
        tag: v0.10.14
        commit: 3a348ffda876ba50ad17d945ff69ffa7155614cb
        dest: vendor/github.com/ncruces/zenity
      - type: git
        url: https://github.com/otiai10/copy
        tag: v1.14.1
        commit: 5ef5923d6ff098ea7a51792c1ec963d04fad9794
        dest: vendor/github.com/otiai10/copy
      - type: git
        url: https://github.com/otiai10/mint
        tag: v1.6.3
        commit: 6dcf2e3a67310fd0fbd970199f187f5c575756c9
        dest: vendor/github.com/otiai10/mint
      - type: git
        url: https://github.com/pierrec/lz4
        tag: v4.1.22
        commit: fdaa7e2eae2400f761d8503ca047b46d2ab67507
        dest: vendor/github.com/pierrec/lz4/v4
      - type: git
        url: https://github.com/randall77/makefat
        commit: 7ddd0e42c8442593c87c1705a5545099604008e5
        dest: vendor/github.com/randall77/makefat
      - type: git
        url: https://github.com/rivo/uniseg
        tag: v0.4.7
        commit: 03509a98a092b522b2ff0de13e53513d18b3b837
        dest: vendor/github.com/rivo/uniseg
      - type: git
        url: https://github.com/sergi/go-diff
        tag: v1.2.0
        commit: b292a3123758b064eeaa3a5aa86df1adca0f4401
        dest: vendor/github.com/sergi/go-diff
      - type: git
        url: https://github.com/spf13/cobra
        tag: v1.10.1
        commit: 7da941c3547e93b8c9f70bbd3befca79c6335388
        dest: vendor/github.com/spf13/cobra
      - type: git
        url: https://github.com/spf13/pflag
        tag: v1.0.9
        commit: 10438578954bba2527fe5cae3684d4532b064bbe
        dest: vendor/github.com/spf13/pflag
      - type: git
        url: https://github.com/zachomedia/go-bdf
        commit: a3af701111be3ca0aa69ec03bbe807a56ea28887
        dest: vendor/github.com/zachomedia/go-bdf
      - type: git
        url: https://github.com/census-instrumentation/opencensus-go
        tag: v0.24.0
        commit: b1a01ee95db0e690d91d7193d037447816fae4c5
        dest: vendor/go.opencensus.io
      - type: git
        url: https://go.googlesource.com/image
        tag: v0.32.0
        commit: 8c4e1c85f1cf8c1730eeb0d0c2bf7777a39ac108
        dest: vendor/golang.org/x/image
      - type: git
        url: https://go.googlesource.com/mod
        tag: v0.28.0
        commit: 1759e969dad244f2f1a18cb367aff8614384ffe4
        dest: vendor/golang.org/x/mod
      - type: git
        url: https://go.googlesource.com/net
        tag: v0.44.0
        commit: 3b23d576ea72235a3fef8f157eb5ab76e65854a8
        dest: vendor/golang.org/x/net
      - type: git
        url: https://go.googlesource.com/sync
        tag: v0.17.0
        commit: 04914c200cb38d4ea960ee6a4c314a028c632991
        dest: vendor/golang.org/x/sync
      - type: git
        url: https://go.googlesource.com/sys
        tag: v0.37.0
        commit: 1edeebeea09c66c5a886ccfefb1be5dafac5c893
        dest: vendor/golang.org/x/sys
      - type: git
        url: https://go.googlesource.com/text
        tag: v0.30.0
        commit: c6abd0305e90ada9293824462268d0ec20d02e5e
        dest: vendor/golang.org/x/text
      - type: git
        url: https://go.googlesource.com/tools
        tag: v0.37.0
        commit: d49da96b802368c7325ac3b662a238c09a0615b9
        dest: vendor/golang.org/x/tools
      - type: git
        url: https://github.com/kubernetes/klog
        tag: v2.90.1
        commit: d7fc50528570f8276de46570f916682257821e22
        dest: vendor/k8s.io/klog/v2
