app-id: io.github.divverent.aaaaxy
runtime: org.freedesktop.Platform
runtime-version: '22.08'
# Do we need to provide a GL extension somehow?
sdk: org.freedesktop.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.golang
command: aaaaxy
finish-args:
  # Needed to access gamepads and for 3D graphics.
  # If we ever get a gamepad-specific permission, switch to that + dri instead.
  - --device=all
  # Needed for XShm.
  - --share=ipc
  # Needed for X11.
  - --socket=x11
  # Needed for audio playback.
  - --socket=pulseaudio
modules:
  - name: aaaaxy
    buildsystem: simple
    build-commands:
      - |
        . /usr/lib/sdk/golang/enable.sh
        AAAAXY_BUILD_USE_VERSION_FILE=true make BUILDTYPE=release BINARY=/app/bin/aaaaxy
        mkdir -p /app/share/icons/hicolor/128x128/apps
        cp aaaaxy.png /app/share/icons/hicolor/128x128/apps/io.github.divverent.aaaaxy.png
        mkdir -p /app/share/applications
        sed -e 's,Icon=aaaaxy,Icon=io.github.divverent.aaaaxy,' < aaaaxy.desktop > /app/share/applications/io.github.divverent.aaaaxy.desktop
        mkdir -p /app/share/metainfo
        sed -e 's,aaaaxy\.png,io.github.divverent.aaaaxy.png,; s,aaaaxy\.desktop,io.github.divverent.aaaaxy.desktop,g' < io.github.divverent.aaaaxy.metainfo.xml > /app/share/metainfo/io.github.divverent.aaaaxy.appdata.xml
    sources:
      - type: git
        url: https://github.com/divVerent/aaaaxy
        # --- TAG GOES HERE ---
        tag: v1.3.436
        # --- REV GOES HERE ---
        commit: 76562542c83400978876f7fed59d8fd867870ace
      - type: file
        path: modules.txt
        dest: vendor
      # --- GO MODULES START HERE, USE go-vendor-to-flatpak-yml.sh TO UPDATE ---
      - type: git
        url: https://github.com/Microsoft/go-winio
        tag: v0.6.0
        commit: 376b2013fee695d54f9b21db81716426a8a736d9
        dest: vendor/github.com/Microsoft/go-winio
      - type: git
        url: https://github.com/adrg/xdg
        tag: v0.4.0
        commit: 4ec40e24f0cf1039f93c773f2984decdea9719b5
        dest: vendor/github.com/adrg/xdg
      - type: git
        url: https://github.com/akavel/rsrc
        tag: v0.10.2
        commit: 936343600d578fb5da472acf6987ed76935a389b
        dest: vendor/github.com/akavel/rsrc
      - type: git
        url: https://github.com/dchest/jsmin
        commit: 59f39799265ff6981e96a8852719a4e5a9f4fd8d
        dest: vendor/github.com/dchest/jsmin
      - type: git
        url: https://github.com/ebitengine/purego
        tag: v0.4.0-alpha.2
        commit: e1459079498f0551770af3cedc2903b3f3e3c7b2
        dest: vendor/github.com/ebitengine/purego
      - type: git
        url: https://github.com/emirpasic/gods
        tag: v1.12.0
        commit: 1615341f118ae12f353cc8a983f35b584342c9b3
        dest: vendor/github.com/emirpasic/gods
      - type: git
        url: https://github.com/fardog/tmx
        commit: 02c45f26167251c118de4f2b10f42fe43f1ad413
        dest: vendor/github.com/fardog/tmx
      - type: git
        url: https://github.com/go-gl/glfw
        commit: 93cebf72946bdd130bbda47817ad53315d776ca7
        dest: vendor/github.com/go-gl/glfw
      - type: git
        url: https://github.com/golang/glog
        commit: 23def4e6c14b4da8ac2ed8007337bc5eb5007998
        dest: vendor/github.com/golang/glog
      - type: git
        url: https://github.com/google/go-cmp
        tag: v0.5.9
        commit: a97318bf6562f2ed2632c5f985db51b1bc5bdcd0
        dest: vendor/github.com/google/go-cmp
      - type: git
        url: https://github.com/google/go-licenses
        commit: ceb292363ec84358c9a276ef23aa0de893e59b84
        dest: vendor/github.com/google/go-licenses
      - type: git
        url: https://github.com/google/licenseclassifier
        commit: 3043a050f148a588e7e0c84dce27579dfe17fd2d
        dest: vendor/github.com/google/licenseclassifier
      - type: git
        url: https://github.com/divVerent/ebiten
        tag: v2.5.1-with-574925cf7a72deaf73be4c481348a7a44f7b7e19-and-cc247962703eba99eae732876496375191f16cbe
        commit: af0411f6e81d59926ebd0a501d2d8a2b17ae3e33
        dest: vendor/github.com/hajimehoshi/ebiten/v2
      - type: git
        url: https://github.com/hajimehoshi/oto
        commit: 31c83ff4311d35cd704044d4d45ea20359104cf2
        dest: vendor/github.com/hajimehoshi/oto/v2
      - type: git
        url: https://github.com/inconshreveable/mousetrap
        tag: v1.0.0
        commit: 76626ae9c91c4f2a10f34cad8ce83ea42c93bb75
        dest: vendor/github.com/inconshreveable/mousetrap
      - type: git
        url: https://github.com/jbenet/go-context
        commit: d14ea06fba99483203c19d92cfcd13ebe73135f4
        dest: vendor/github.com/jbenet/go-context
      - type: git
        url: https://github.com/jeandeaual/go-locale
        commit: 7de61946b173ae2d8812fce85f620e2b8559c7d6
        dest: vendor/github.com/jeandeaual/go-locale
      - type: git
        url: https://github.com/jezek/xgb
        tag: v1.1.0
        commit: a57abb570aeba12f867c58afe22ce49ac5db4872
        dest: vendor/github.com/jezek/xgb
      - type: git
        url: https://github.com/jfreymuth/oggvorbis
        tag: v1.0.5
        commit: c02fb2ffd89cdcc258af6e4b518f45a485a396d2
        dest: vendor/github.com/jfreymuth/oggvorbis
      - type: git
        url: https://github.com/jfreymuth/vorbis
        tag: v1.0.2
        commit: 55da9865afe7a8953bee35bef04c240163786ccc
        dest: vendor/github.com/jfreymuth/vorbis
      - type: git
        url: https://github.com/josephspurrier/goversioninfo
        tag: v1.4.0
        commit: 233067e5ebdfc62d994b1446a607b40ced91907b
        dest: vendor/github.com/josephspurrier/goversioninfo
      - type: git
        url: https://github.com/kevinburke/ssh_config
        commit: 01f96b0aa0cdcaa93f9495f89bbc6cb5a992ce6e
        dest: vendor/github.com/kevinburke/ssh_config
      - type: git
        url: https://github.com/leonelquinteros/gotext
        tag: v1.5.2
        commit: 6f9bcaa9698f6926c1524d7428a1c6223c76c071
        dest: vendor/github.com/leonelquinteros/gotext
      - type: git
        url: https://github.com/lucasb-eyer/go-colorful
        tag: v1.2.0
        commit: d2b05a0d83cca9d610425691c3253d5f36d0ad06
        dest: vendor/github.com/lucasb-eyer/go-colorful
      - type: git
        url: https://github.com/mitchellh/go-homedir
        tag: v1.1.0
        commit: af06845cf3004701891bf4fdb884bfe4920b3727
        dest: vendor/github.com/mitchellh/go-homedir
      - type: git
        url: https://github.com/mitchellh/hashstructure
        tag: v2.0.2
        commit: a045b665615f739329536a58c25ca6327abf1ec1
        dest: vendor/github.com/mitchellh/hashstructure/v2
      - type: git
        url: https://github.com/ncruces/zenity
        tag: v0.10.6
        commit: 43c39c3830e87b359e39e5584fb9b4db988a56d1
        dest: vendor/github.com/ncruces/zenity
      - type: git
        url: https://github.com/otiai10/copy
        tag: v1.6.0
        commit: edeb9f37d4d0c28725014fcab6635120197932a1
        dest: vendor/github.com/otiai10/copy
      - type: git
        url: https://github.com/randall77/makefat
        commit: 7ddd0e42c8442593c87c1705a5545099604008e5
        dest: vendor/github.com/randall77/makefat
      - type: git
        url: https://github.com/sergi/go-diff
        tag: v1.2.0
        commit: b292a3123758b064eeaa3a5aa86df1adca0f4401
        dest: vendor/github.com/sergi/go-diff
      - type: git
        url: https://github.com/spf13/cobra
        tag: v0.0.5
        commit: f2b07da1e2c38d5f12845a4f607e2e1018cbb1f5
        dest: vendor/github.com/spf13/cobra
      - type: git
        url: https://github.com/spf13/pflag
        tag: v1.0.5
        commit: 2e9d26c8c37aae03e3f9d4e90b7116f5accb7cab
        dest: vendor/github.com/spf13/pflag
      - type: git
        url: https://github.com/src-d/gcfg
        tag: v1.4.0
        commit: 1ac3a1ac202429a54835fe8408a92880156b489d
        dest: vendor/github.com/src-d/gcfg
      - type: git
        url: https://github.com/xanzy/ssh-agent
        tag: v0.2.1
        commit: 6a3e2ff9e7c564f36873c2e36413f634534f1c44
        dest: vendor/github.com/xanzy/ssh-agent
      - type: git
        url: https://github.com/zachomedia/go-bdf
        commit: a3af701111be3ca0aa69ec03bbe807a56ea28887
        dest: vendor/github.com/zachomedia/go-bdf
      - type: git
        url: https://go.googlesource.com/crypto
        tag: v0.1.0
        commit: 642fcc37f5043eadb2509c84b2769e729e7d27ef
        dest: vendor/golang.org/x/crypto
      - type: git
        url: https://go.googlesource.com/exp
        commit: 073fb133917255bbd7d71328b2dd8cd2233561b5
        dest: vendor/golang.org/x/exp
      - type: git
        url: https://go.googlesource.com/image
        tag: v0.7.0
        commit: ed5dba0ea28f9438e4dac0320f7d9bb2fddd9737
        dest: vendor/golang.org/x/image
      - type: git
        url: https://go.googlesource.com/mobile
        commit: e0f57694e12c72b67ceffd119827cbea8f0840cc
        dest: vendor/golang.org/x/mobile
      - type: git
        url: https://go.googlesource.com/mod
        tag: v0.10.0
        commit: ad6fd61f94f8fdf6926f5dee6e45bdd13add2f9f
        dest: vendor/golang.org/x/mod
      - type: git
        url: https://go.googlesource.com/net
        tag: v0.9.0
        commit: 694cff8668bac64e0864b552bffc280cd27f21b1
        dest: vendor/golang.org/x/net
      - type: git
        url: https://go.googlesource.com/sync
        tag: v0.1.0
        commit: 8fcdb60fdcc0539c5e357b2308249e4e752147f1
        dest: vendor/golang.org/x/sync
      - type: git
        url: https://go.googlesource.com/sys
        tag: v0.7.0
        commit: 64840c112d2335ed9874114aed48f946e778a769
        dest: vendor/golang.org/x/sys
      - type: git
        url: https://go.googlesource.com/text
        tag: v0.9.0
        commit: 48e4a4a957429d31328a685863b594ca9a06b552
        dest: vendor/golang.org/x/text
      - type: git
        url: https://go.googlesource.com/tools
        tag: v0.8.0
        commit: 5ef3193183ecbeb75ee5b12e4d0d76129ec4da3d
        dest: vendor/golang.org/x/tools
      - type: git
        url: https://gopkg.in/src-d/go-billy.v4
        tag: v4.3.2
        commit: 780403cfc1bc95ff4d07e7b26db40a6186c5326e
        dest: vendor/gopkg.in/src-d/go-billy.v4
      - type: git
        url: https://gopkg.in/src-d/go-git.v4
        tag: v4.13.1
        commit: 0d1a009cbb604db18be960db5f1525b99a55d727
        dest: vendor/gopkg.in/src-d/go-git.v4
      - type: git
        url: https://gopkg.in/warnings.v0
        tag: v0.1.2
        commit: ec4a0fea49c7b46c2aeb0b51aac55779c607e52b
        dest: vendor/gopkg.in/warnings.v0
